% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mapBiPolar.R
\name{mapBiPolar}
\alias{mapBiPolar}
\title{Function: Map a bipolar theme broken around a neutral value}
\usage{
mapBiPolar(var.name, shape, break.value = 0, neg.breaks = 4,
  pos.breaks = neg.breaks, map.title = "",
  legend.title = deparse(substitute(var.name)), legend.pos = "bottomleft",
  legend.cex = 1, add.to.map = F)
}
\arguments{
\item{var.name}{A variable to be mapped in a bipolar theme. If it is in a data-frame,
then the data-frame must be refered to, e.g., \code{df$var}}

\item{shape}{An existing spatial polygon or spatial polygon data-frame}

\item{break.value}{Neutral value separating the negative branch from the
positive branch of the variable}

\item{neg.breaks}{Number of classes in the negative branch (default=4)}

\item{pos.breaks}{Number of classes in the positive branch (default=\code{neg.breaks})}

\item{map.title}{Character string with map title}

\item{legend.title}{Character string with legend title (default=\code{var.name})}

\item{legend.pos}{Location of legend in the map frame (default=\code{"bottomleft"})}

\item{legend.cex}{Relative font size of the legend}

\item{add.to.map}{Logical to start a new map frame if \code{FALSE} or overlay onto an
existing map frame if \code{TRUE}}
}
\value{
\code{NULL}
}
\description{
\code{mapBiPolar} generates a map of a bipolar theme variable
}
\details{
The function \code{mapBiPolar} maps a \emph{bipolar variable} with a
  \emph{divergent color ramp} around a specific break values. A legend is generated.
  Below values are coded blue and above values red. Each branch is broken
  into 'quantiles'. Therefore, the number of class in each branch should be
  proportional to the number of observations in each class.
}
\examples{
library(maptools)
data(mig); data(shpSEA); data(shpNA); data(shpStates)
## Calculate In- and Out-flows and merge to shapefile
inFlow <- apply(mig[,9:516],2,sum)
outFlow <- apply(mig[,9:516],1,sum)
logRateFlow <- log(inFlow/outFlow)
flowDF <- data.frame(mig$SEQID,inFlow,outFlow,logRateFlow)
names(flowDF) <- c("SEQID","InFlow","OutFlow", "LogRateFlow")

## Merge with shpSEA
shpSEA <- sp::merge(shpSEA, flowDF, by.x="SEQID", by.y="SEQID")

## Check number of classes in logRateFlows
sum(shpSEA$LogRateFlow < 0)
sum(shpSEA$LogRateFlow >= 0)

## Generate map
boxSEA <- bbox(shpSEA)
plot(shpNA, col="cornsilk", axes=T, xlim=boxSEA[1,], ylim=boxSEA[2,], bg="lightskyblue1")
mapBiPolar(shpSEA$LogRateFlow, shpSEA, neg.breaks=5, pos.breaks=4,
           legend.cex=0.9, legend.pos="bottomright", legend.title="Log(Inflow/Outflow)",
           map.title="Internal SEA Migration Gains and Losses", add.to.map=T)
plot(shpStates, border="red", lwd=2, add=TRUE)

}
\author{
Michael Tiefelsdorf <tiefelsdorf@utd.edu>
}
